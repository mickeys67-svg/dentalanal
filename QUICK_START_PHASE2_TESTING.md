# Phase 2 í…ŒìŠ¤íŠ¸ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

**ë°°í¬**: ì§„í–‰ ì¤‘ (15-20ë¶„ ì†Œìš”)
**ìƒíƒœ**: âœ… ëª¨ë“  ì½”ë“œ ì»¤ë°‹ ë° í‘¸ì‹œ ì™„ë£Œ

---

## â±ï¸ íƒ€ì„ë¼ì¸

| ì‹œê°„ | ì‘ì—… |
|------|------|
| ì§€ê¸ˆ | GitHub Actions ë°°í¬ ì¤‘ (Docker ì´ë¯¸ì§€ ë¹Œë“œ) |
| +5ë¶„ | Cloud Runì— ì´ë¯¸ì§€ ë°°í¬ ì‹œì‘ |
| +10ë¶„ | ë°°í¬ ì™„ë£Œ (health ì—”ë“œí¬ì¸íŠ¸ ì‘ë‹µ) |
| +15ë¶„ | âœ… í…ŒìŠ¤íŠ¸ ì‹œì‘ ê°€ëŠ¥ |

---

## ğŸš€ 3ë‹¨ê³„ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°

### 1ï¸âƒ£ ë°°í¬ í™•ì¸ (ì•½ 10ë¶„ í›„)

```bash
# ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°:
https://dentalanal-864421937037.us-west1.run.app/health

# ë˜ëŠ” í„°ë¯¸ë„ì—ì„œ:
curl https://dentalanal-864421937037.us-west1.run.app/health

# âœ… ì‘ë‹µ: {"status": "ok"}
```

### 2ï¸âƒ£ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± (ì•½ 11ë¶„ í›„)

```bash
# Postman, Insomnia, ë˜ëŠ” curl:
curl -X POST \
  https://dentalanal-864421937037.us-west1.run.app/api/v1/status/dev/seed-test-data \
  -H "Content-Type: application/json"

# âœ… ì‘ë‹µ ì˜ˆì‹œ:
{
  "status": "SUCCESS",
  "message": "í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "client_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
  "details": {
    "agency": "D-MIND ëŒ€í–‰ì‚¬",
    "client": "A ì¹˜ê³¼",
    "keywords": ["ì„í”Œë€íŠ¸", "ì¹˜ì•„êµì •", "ê°•ë‚¨ì—­ì¹˜ê³¼"],
    "platforms": ["NAVER_AD", "NAVER_PLACE", "NAVER_VIEW"],
    "sample_ranks": "ì§€ë‚œ 3ì¼ì¹˜ ë°ì´í„° (í…ŒìŠ¤íŠ¸ìš©)"
  }
}

ğŸ’¾ client_id ë³µì‚¬í•´ë‘ê¸°!
```

### 3ï¸âƒ£ SetupWizardì—ì„œ í…ŒìŠ¤íŠ¸ (ì•½ 12ë¶„ í›„)

```
1. https://dentalanal-864421937037.us-west1.run.app ì—´ê¸°
2. ë¡œê·¸ì¸ (ê¸°ì¡´ ê³„ì • ë˜ëŠ” íšŒì›ê°€ì…)
3. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
4. SetupWizard Step 3ì—ì„œ:
   - ë¶„ì„ í‚¤ì›Œë“œ: "ì„í”Œë€íŠ¸" â† ì •í™•íˆ ì…ë ¥!
   - ë¶„ì„ ëŒ€ìƒ: "NAVER_PLACE"
5. "ì¡°ì‚¬ ì‹œì‘" í´ë¦­
6. F12 â†’ Network íƒ­ì—ì„œ í™•ì¸:
   âœ… POST /api/v1/scrape/place (status 200)
   âœ… GET /api/v1/scrape/results (ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œ)
   âœ… ê²°ê³¼ ë°ì´í„° í‘œì‹œë¨
```

---

## âœ… ìµœì†Œ ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¼ë„ ì•ˆ ë˜ë©´ "ë¬¸ì œ ë°œìƒ" ì„¹ì…˜ ì°¸ê³ :

- [ ] **ê±´ê°• ì²´í¬**: `/health` ì‘ë‹µ `{"status": "ok"}`
- [ ] **ë°ì´í„° ì‹œë“œ**: `/dev/seed-test-data` ì‘ë‹µ `"SUCCESS"`
- [ ] **í´ë§ ìš”ì²­**: Network íƒ­ì—ì„œ `/scrape/results` ì—¬ëŸ¬ ë²ˆ ë³´ì„
- [ ] **ê²°ê³¼ í‘œì‹œ**: "ì„í”Œë€íŠ¸" ê²€ìƒ‰ ê²°ê³¼ UIì— í‘œì‹œ
- [ ] **í´ë§ ê°„ê²©**: 500ms â†’ 750ms â†’ 1.125s... ì¦ê°€ í™•ì¸ (ì„ íƒ)

---

## ğŸš¨ ë¬¸ì œ ë°œìƒ

### âŒ `/health` ì‘ë‹µ ì—†ìŒ
```bash
# ì•„ì§ ë°°í¬ ì¤‘ (ê¸°ë‹¤ë¦¬ê¸°)
# ë˜ëŠ” GitHub Actions í™•ì¸:
https://github.com/mickeys67-svg/dentalanal/actions

# ìµœê·¼ ì‹¤í–‰ ìƒíƒœ í™•ì¸
```

### âŒ `/dev/seed-test-data` 500 ì—ëŸ¬
```bash
# 1. ë°°í¬ê°€ ì™„ì „íˆ ì™„ë£Œë˜ì—ˆë‚˜?
curl https://dentalanal-864421937037.us-west1.run.app/health

# 2. ì‘ë‹µ ìƒì„¸ í™•ì¸
# ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ë©´ ì •í™•í•œ ë¬¸ì œë¥¼ ì•Œ ìˆ˜ ìˆìŒ
```

### âŒ SetupWizardì—ì„œ "ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"
```bash
# 1. í‚¤ì›Œë“œ ì •í™•ì„± í™•ì¸ (ì„í”Œë€íŠ¸)
# 2. ì‹œë“œ ë°ì´í„° ë‹¤ì‹œ ìƒì„±
curl -X POST \
  https://dentalanal-864421938037.us-west1.run.app/api/v1/status/dev/seed-test-data

# 3. Network íƒ­ì—ì„œ /scrape/results ì‘ë‹µ í™•ì¸
#    has_data: falseì¸ ì´ìœ ëŠ”?
```

### âŒ ë¡œê·¸ì¸ ì•ˆ ë¨
```bash
# íšŒì›ê°€ì… ì´ë©”ì¼ì´ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë©´:
1. ë‹¤ë¥¸ ì´ë©”ì¼ë¡œ íšŒì›ê°€ì…
2. ë˜ëŠ” ê¸°ì¡´ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
```

---

## ğŸ“Š Network íƒ­ì—ì„œ í™•ì¸í•´ì•¼ í•  ìš”ì²­

```
âœ… POST /api/v1/scrape/place
   Status: 200 OK
   Response: { "task_id": "...", "message": "..." }

âœ… GET /api/v1/scrape/results (í´ë§)
   Status: 200 OK
   ì‘ë‹µ ë³€í™”:
   - 1ì°¨: { "has_data": false, "results": [] }
   - 2ì°¨: { "has_data": false, "results": [] }
   - ...
   - ìµœì¢…: { "has_data": true, "results": [...] } âœ…

âœ… UI ë³€í™”
   "ì¡°ì‚¬ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤" Toast
   â†’ ë¡œë”© ìŠ¤í”¼ë„ˆ
   â†’ ê²°ê³¼ í‘œì‹œ
```

---

## ğŸ’¡ Tips

**í‚¤ì›Œë“œëŠ” ì •í™•íˆ**: `ì„í”Œë€íŠ¸` (ë‹¤ë¥¸ í‚¤ì›Œë“œ x)
- ì‹œë“œ ë°ì´í„°ì— ìƒì„±ëœ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤

**Network íƒ­ í•„í„°**: XHRë§Œ ë³´ê¸°
```
DevTools â†’ Network â†’ XHR í•„í„°
ìš”ì²­ ê°„ ì‹œê°„ ì°¨ì´ ë³´ê¸°
```

**ë¡œê·¸ í™•ì¸**: Cloud Run ëŒ€ì‹œë³´ë“œ
```
https://console.cloud.google.com/run?project=dentalanal
```

---

## ğŸ“ ì •í™•í•œ ë¬¸ì œ ì§„ë‹¨ì„ ìœ„í•´ ì•Œë ¤ì£¼ì„¸ìš”

ë¬¸ì œ ë°œìƒ ì‹œ ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”:

1. **ì–´ëŠ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨?**
   - [ ] `/health` ì‘ë‹µ ì—†ìŒ
   - [ ] `/dev/seed-test-data` ì—ëŸ¬
   - [ ] SetupWizard ì…ë ¥ ì•ˆ ë¨
   - [ ] "ì¡°ì‚¬ ì‹œì‘" ë²„íŠ¼ ì•ˆ ëˆŒë¦¼
   - [ ] ê²°ê³¼ê°€ ì•ˆ ë³´ì„

2. **ì—ëŸ¬ ë©”ì‹œì§€**
   - ë¸Œë¼ìš°ì € Console ì—ëŸ¬ (F12 â†’ Console)
   - Network íƒ­ì˜ ì‘ë‹µ ë‚´ìš©
   - Toast ë©”ì‹œì§€

3. **í™•ì¸í•´ì£¼ì„¸ìš”**
   - client_idëŠ” ì‹œë“œëœ ë°ì´í„°ì˜ IDì™€ ì¼ì¹˜í•˜ëŠ”ê°€?
   - í‚¤ì›Œë“œëŠ” "ì„í”Œë€íŠ¸"ì¸ê°€?
   - í”Œë«í¼ì€ "NAVER_PLACE"ì¸ê°€?

---

## ğŸ¯ ìµœì¢… ëª©í‘œ

âœ… Phase 2-1 (ì—ëŸ¬ í•¸ë“¤ë§): ì‹¤íŒ¨ ì‹œ êµ¬ì²´ì  ë©”ì‹œì§€ í‘œì‹œ
âœ… Phase 2-2 (ë™ì  í´ë§): 500ms-3s ê°„ê²©ìœ¼ë¡œ í´ë§, 30ì´ˆ max
âœ… Phase 2-3 (ë™ì‹œ ìš”ì²­): ì¤‘ë³µ ì‹œ 409 ì‘ë‹µ

---

**ì•½ 15ë¶„ í›„ë¶€í„° ì‹œì‘í•˜ì„¸ìš”!**

